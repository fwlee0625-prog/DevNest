# ğŸ” è®¤è¯ç³»ç»Ÿä½¿ç”¨æ–‡æ¡£

å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œè´¦æˆ·ç®¡ç†ç³»ç»Ÿï¼ŒåŸºäº Supabaseã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ”‘ ç”¨æˆ·è®¤è¯
- âœ… ç”¨æˆ·å + å¯†ç ç™»å½•
- âœ… ä¼šè¯æŒä¹…åŒ–ï¼ˆåˆ·æ–°é¡µé¢ä¿æŒç™»å½•ï¼‰
- âœ… è‡ªåŠ¨è®¤è¯çŠ¶æ€ç®¡ç†
- âœ… å®‰å…¨çš„é€€å‡ºç™»å½•

### ğŸ‘¤ è´¦æˆ·è®¾ç½®
- âœ… æŸ¥çœ‹å’Œç¼–è¾‘ç”¨æˆ·ä¿¡æ¯
- âœ… éšæœºæ›´æ¢å¤´åƒ
- âœ… ä¿®æ”¹å¯†ç 
- âœ… å®æ—¶ä¿å­˜åé¦ˆ

### ğŸ¨ ç”¨æˆ·ç•Œé¢
- âœ… Vercel é£æ ¼çš„ç°ä»£ UI
- âœ… æš—è‰²æ¨¡å¼æ”¯æŒ
- âœ… å“åº”å¼è®¾è®¡
- âœ… ç”¨æˆ·å¤´åƒä¸‹æ‹‰èœå•

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase.ts              # Supabase å®¢æˆ·ç«¯é…ç½®
â”œâ”€â”€ services/
â”‚   â””â”€â”€ authService.ts           # è®¤è¯æœåŠ¡ï¼ˆç™»å½•ã€æ³¨å†Œã€ç™»å‡ºï¼‰
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useAuth.ts               # è®¤è¯ Hook
â”œâ”€â”€ types/
â”‚   â””â”€â”€ auth.ts                  # è®¤è¯ç±»å‹å®šä¹‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â””â”€â”€ Header.tsx           # å¯¼èˆªæ ï¼ˆå«ç”¨æˆ·çŠ¶æ€ï¼‰
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ Button.tsx           # æŒ‰é’®ç»„ä»¶
â”‚       â”œâ”€â”€ Input.tsx            # è¾“å…¥æ¡†ç»„ä»¶
â”‚       â””â”€â”€ UserMenu.tsx         # ç”¨æˆ·ä¸‹æ‹‰èœå•
â””â”€â”€ app/
    â”œâ”€â”€ login/
    â”‚   â””â”€â”€ page.tsx             # ç™»å½•é¡µé¢
    â””â”€â”€ account/
        â””â”€â”€ page.tsx             # è´¦æˆ·è®¾ç½®é¡µé¢
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒé…ç½®

ç¡®ä¿ `.env.local` æ–‡ä»¶åŒ…å«ï¼š

```bash
NEXT_PUBLIC_SUPABASE_URL=ä½ çš„é¡¹ç›®URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=ä½ çš„å…¬é’¥
```

### 2. å¯åŠ¨åº”ç”¨

```bash
pnpm dev
# æˆ–
npm run dev
```

### 3. è®¿é—®åº”ç”¨

- **é¦–é¡µ**: http://localhost:3000
- **ç™»å½•**: http://localhost:3000/login
- **è´¦æˆ·è®¾ç½®**: http://localhost:3000/account

## ğŸ“ ä½¿ç”¨è¯´æ˜

### ç™»å½•

1. è®¿é—® `/login`
2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
3. ç‚¹å‡»"ç™»å½•"æŒ‰é’®
4. ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬é¦–é¡µ

**æµ‹è¯•è´¦å·**ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`

### æŸ¥çœ‹è´¦æˆ·è®¾ç½®

1. ç™»å½•åï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç”¨æˆ·å¤´åƒ
2. é€‰æ‹©"è´¦æˆ·è®¾ç½®"
3. è¿›å…¥è´¦æˆ·è®¾ç½®é¡µé¢

### ä¿®æ”¹ä¸ªäººä¿¡æ¯

1. åœ¨è´¦æˆ·è®¾ç½®é¡µé¢
2. ä¿®æ”¹ç”¨æˆ·å
3. ç‚¹å‡»"ä¿å­˜æ›´æ”¹"

### æ›´æ¢å¤´åƒ

1. åœ¨è´¦æˆ·è®¾ç½®é¡µé¢
2. ç‚¹å‡»"æ›´æ¢å¤´åƒ"æŒ‰é’®
3. ç³»ç»Ÿä¼šéšæœºç”Ÿæˆæ–°å¤´åƒ

### ä¿®æ”¹å¯†ç 

1. åœ¨è´¦æˆ·è®¾ç½®é¡µé¢
2. è¾“å…¥å½“å‰å¯†ç ã€æ–°å¯†ç å’Œç¡®è®¤å¯†ç 
3. ç‚¹å‡»"ä¿®æ”¹å¯†ç "
4. ä¿®æ”¹æˆåŠŸåå¯†ç å­—æ®µä¼šè‡ªåŠ¨æ¸…ç©º

### é€€å‡ºç™»å½•

1. ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·å¤´åƒ
2. é€‰æ‹©"é€€å‡ºç™»å½•"
3. è‡ªåŠ¨è¿”å›é¦–é¡µ

## ğŸ”§ API å‚è€ƒ

### useAuth Hook

```typescript
const {
  user,           // å½“å‰ç”¨æˆ·ä¿¡æ¯
  loading,        // åŠ è½½çŠ¶æ€
  error,          // é”™è¯¯ä¿¡æ¯
  login,          // ç™»å½•æ–¹æ³•
  logout,         // ç™»å‡ºæ–¹æ³•
  register,       // æ³¨å†Œæ–¹æ³•
  isAuthenticated // æ˜¯å¦å·²ç™»å½•
} = useAuth();
```

### AuthService

```typescript
// ç™»å½•
const { user, error } = await AuthService.login({ username, password });

// æ³¨å†Œ
const { user, error } = await AuthService.register({ username, password });

// ç™»å‡º
const { error } = await AuthService.logout();

// è·å–å½“å‰ç”¨æˆ·
const user = await AuthService.getCurrentUser();
```

## ğŸ¨ è‡ªå®šä¹‰

### ä¿®æ”¹å¤´åƒæ ·å¼

å¤´åƒä½¿ç”¨ [DiceBear Avatars](https://dicebear.com/) ç”Ÿæˆã€‚å¯ä»¥ä¿®æ”¹ï¼š

```typescript
// åœ¨ src/services/authService.ts æˆ– src/components/ui/UserMenu.tsx
const avatarUrl = `https://api.dicebear.com/7.x/[é£æ ¼]/svg?seed=${username}`;
```

å¯é€‰é£æ ¼ï¼š
- `avataaars` - å¡é€šå¤´åƒï¼ˆå½“å‰ä½¿ç”¨ï¼‰
- `bottts` - æœºå™¨äºº
- `personas` - åƒç´ äººç‰©
- æ›´å¤šé£æ ¼è§å®˜æ–¹æ–‡æ¡£

### æ·»åŠ æ›´å¤šç”¨æˆ·å­—æ®µ

1. åœ¨ `src/types/auth.ts` ä¸­æ·»åŠ å­—æ®µï¼š

```typescript
export interface User {
  id: string;
  email: string;
  username: string;
  avatar_url?: string;
  bio?: string;        // æ–°å¢
  website?: string;    // æ–°å¢
}
```

2. åœ¨è´¦æˆ·è®¾ç½®é¡µé¢æ·»åŠ å¯¹åº”çš„è¾“å…¥æ¡†

3. åœ¨ `AuthService` ä¸­æ›´æ–° `user_metadata`

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **æ°¸è¿œä¸è¦åœ¨å®¢æˆ·ç«¯å­˜å‚¨æ•æ„Ÿä¿¡æ¯**
2. **ä½¿ç”¨ç¯å¢ƒå˜é‡ä¿æŠ¤ API å¯†é’¥**
3. **å®šæœŸæ›´æ–°å¯†ç **
4. **ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HTTPS**

## ğŸ› å¸¸è§é—®é¢˜

### Q: ç™»å½•ååˆ·æ–°é¡µé¢éœ€è¦é‡æ–°ç™»å½•ï¼Ÿ

A: æ£€æŸ¥ Supabase é…ç½®ï¼š

```typescript
// src/lib/supabase.ts
export const supabase = createClient(url, key, {
  auth: {
    persistSession: true,  // ç¡®ä¿ä¸º true
    autoRefreshToken: true,
  },
});
```

### Q: ä¿®æ”¹å¯†ç åæ— æ³•ç™»å½•ï¼Ÿ

A: Supabase ä¿®æ”¹å¯†ç åä¼šè‡ªåŠ¨ç™»å‡ºã€‚éœ€è¦ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•ã€‚

### Q: å¤´åƒä¸æ˜¾ç¤ºï¼Ÿ

A: ç¡®ä¿ç½‘ç»œå¯ä»¥è®¿é—® `api.dicebear.com`ã€‚å¦‚æœæ— æ³•è®¿é—®ï¼Œå¯ä»¥ï¼š
1. ä½¿ç”¨å…¶ä»–å¤´åƒæœåŠ¡
2. ä¸Šä¼ è‡ªå®šä¹‰å¤´åƒåˆ° Supabase Storage

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Supabase è®¤è¯æ–‡æ¡£](https://supabase.com/docs/guides/auth)
- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)
- [DiceBear Avatars](https://dicebear.com/)

## ğŸ“„ è®¸å¯

MIT License

---

**äº«å—ä½ çš„æ–°è®¤è¯ç³»ç»Ÿï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åé¦ˆã€‚

